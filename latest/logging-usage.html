

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using the API &mdash; google-cloud 5113bff documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="google-cloud 5113bff documentation" href="index.html"/>
        <link rel="next" title="Stackdriver Logging Client" href="logging-client.html"/>
        <link rel="prev" title="Error Reporting Utilities" href="error-reporting-util.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> google-cloud
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">google-cloud</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="google-cloud-api.html">Shared Core Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="google-cloud-config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="google-cloud-auth.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="iterators.html">Iterators</a></li>
<li class="toctree-l1"><a class="reference internal" href="operation-api.html">Long-Running Operations</a></li>
</ul>
<p class="caption"><span class="caption-text">BigQuery</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="bigquery-usage.html">Using the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="bigquery-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="bigquery-dataset.html">Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="bigquery-job.html">Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="bigquery-table.html">Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="bigquery-query.html">Query</a></li>
<li class="toctree-l1"><a class="reference internal" href="bigquery-schema.html">Schemas</a></li>
</ul>
<p class="caption"><span class="caption-text">BigTable</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="bigtable-usage.html">Using the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="bigtable-client-intro.html">Base for Everything</a></li>
<li class="toctree-l1"><a class="reference internal" href="bigtable-instance-api.html">Instance Admin API</a></li>
<li class="toctree-l1"><a class="reference internal" href="bigtable-table-api.html">Table Admin API</a></li>
<li class="toctree-l1"><a class="reference internal" href="bigtable-data-api.html">Data API</a></li>
<li class="toctree-l1"><a class="reference internal" href="bigtable-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="bigtable-instance.html">Instance</a></li>
<li class="toctree-l1"><a class="reference internal" href="bigtable-cluster.html">Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="bigtable-table.html">Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="bigtable-column-family.html">Column Families</a></li>
<li class="toctree-l1"><a class="reference internal" href="bigtable-row.html">Bigtable Row</a></li>
<li class="toctree-l1"><a class="reference internal" href="bigtable-row-filters.html">Bigtable Row Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="bigtable-row-data.html">Row Data</a></li>
</ul>
<p class="caption"><span class="caption-text">Datastore</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="datastore-usage.html">Using the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="datastore-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="datastore-entities.html">Entities</a></li>
<li class="toctree-l1"><a class="reference internal" href="datastore-keys.html">Keys</a></li>
<li class="toctree-l1"><a class="reference internal" href="datastore-queries.html">Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="datastore-transactions.html">Transactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="datastore-batches.html">Batches</a></li>
<li class="toctree-l1"><a class="reference internal" href="datastore-helpers.html">Helpers</a></li>
</ul>
<p class="caption"><span class="caption-text">DNS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dns-usage.html">Using the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="dns-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="dns-zone.html">Managed Zones</a></li>
<li class="toctree-l1"><a class="reference internal" href="dns-resource-record-set.html">Resource Record Sets</a></li>
<li class="toctree-l1"><a class="reference internal" href="dns-changes.html">Change Sets</a></li>
</ul>
<p class="caption"><span class="caption-text">Natural Language</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="language-usage.html">Using the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="language-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="language-document.html">Document</a></li>
<li class="toctree-l1"><a class="reference internal" href="language-responses.html">Natural Language Response Classes</a></li>
</ul>
<p class="caption"><span class="caption-text">Pub/Sub</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pubsub-usage.html">Using the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="pubsub-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="pubsub-topic.html">Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="pubsub-subscription.html">Subscriptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="pubsub-message.html">Message</a></li>
<li class="toctree-l1"><a class="reference internal" href="pubsub-iam.html">IAM Policy</a></li>
</ul>
<p class="caption"><span class="caption-text">Resource Manager</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="resource-manager-api.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="resource-manager-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="resource-manager-project.html">Projects</a></li>
</ul>
<p class="caption"><span class="caption-text">Runtime Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="runtimeconfig-usage.html">Using the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtimeconfig-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtimeconfig-config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtimeconfig-variable.html">Variables</a></li>
</ul>
<p class="caption"><span class="caption-text">Spanner</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="spanner-usage.html">Using the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-client-usage.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-instance-usage.html">Instance Admin API</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-database-usage.html">Database Admin API</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-session-crud-usage.html">Session Creation / Deletion</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-session-implicit-txn-usage.html">Implicit Transactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-session-pool-usage.html">Session Pools</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-batch-usage.html">Batching Modifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-snapshot-usage.html">Read-only Transactions via Snapshots</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-transaction-usage.html">Read-write Transactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-client-api.html">Spanner Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-instance-api.html">Instance API</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-database-api.html">Database API</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-session-api.html">Session API</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-session-api.html#module-google.cloud.spanner.pool">Session Pools API</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-keyset-api.html">Keyset API</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-snapshot-api.html">Snapshot API</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-batch-api.html">Batch API</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-transaction-api.html">Transaction API</a></li>
<li class="toctree-l1"><a class="reference internal" href="spanner-streamed-api.html">StreamedResultSet API</a></li>
</ul>
<p class="caption"><span class="caption-text">Speech</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="speech-usage.html">Using the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="speech-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="speech-encoding.html">Speech Encoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="speech-operation.html">Speech Operation</a></li>
<li class="toctree-l1"><a class="reference internal" href="speech-result.html">Speech Result</a></li>
<li class="toctree-l1"><a class="reference internal" href="speech-sample.html">Speech Sample</a></li>
<li class="toctree-l1"><a class="reference internal" href="speech-alternative.html">Speech Alternative</a></li>
</ul>
<p class="caption"><span class="caption-text">Stackdriver Error Reporting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="error-reporting-usage.html">Using the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="error-reporting-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="error-reporting-util.html">Error Reporting Utilities</a></li>
</ul>
<p class="caption"><span class="caption-text">Stackdriver Logging</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using the API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#authentication-and-configuration">Authentication and Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#writing-log-entries">Writing log entries</a></li>
<li class="toctree-l2"><a class="reference internal" href="#retrieving-log-entries">Retrieving log entries</a></li>
<li class="toctree-l2"><a class="reference internal" href="#delete-all-entries-for-a-logger">Delete all entries for a logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="#manage-log-metrics">Manage log metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#export-log-entries-using-sinks">Export log entries using sinks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#export-to-cloud-storage">Export to Cloud Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#export-to-bigquery">Export to BigQuery</a></li>
<li class="toctree-l3"><a class="reference internal" href="#export-to-pub-sub">Export to Pub/Sub</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manage-sinks">Manage Sinks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#integration-with-python-logging-module">Integration with Python logging module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#cloud-logging-handler">Cloud Logging Handler</a></li>
<li class="toctree-l1"><a class="reference internal" href="#fluentd-logging-handlers">fluentd logging handlers</a></li>
<li class="toctree-l1"><a class="reference internal" href="#cloud-logging-handler-transports">Cloud Logging Handler transports</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-logger.html">Logger</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-entries.html">Entries</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-metric.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-sink.html">Sinks</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-stdlib-usage.html">Integration with Python logging module</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-handlers.html">Python Logging Module Handler</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-handlers-app-engine.html">Google App Engine flexible Log Handler</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-handlers-container-engine.html">Google Container Engine Log Handler</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-transports-sync.html">Python Logging Handler Sync Transport</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-transports-thread.html">Python Logging Handler Threaded Transport</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging-transports-base.html">Python Logging Handler Sync Transport</a></li>
</ul>
<p class="caption"><span class="caption-text">Stackdriver Monitoring</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="monitoring-usage.html">Using the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring-metric.html">Metric Descriptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring-resource.html">Monitored Resource Descriptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring-group.html">Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring-query.html">Time Series Query</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring-timeseries.html">Time Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring-label.html">Label Descriptors</a></li>
</ul>
<p class="caption"><span class="caption-text">Storage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="storage-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="storage-blobs.html">Blobs / Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="storage-buckets.html">Buckets</a></li>
<li class="toctree-l1"><a class="reference internal" href="storage-acl.html">ACL</a></li>
<li class="toctree-l1"><a class="reference internal" href="storage-batch.html">Batches</a></li>
</ul>
<p class="caption"><span class="caption-text">Translate</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="translate-usage.html">Using the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="translate-client.html">Client</a></li>
</ul>
<p class="caption"><span class="caption-text">Vision</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="vision-usage.html">Using the Vision API</a></li>
<li class="toctree-l1"><a class="reference internal" href="vision-annotations.html">Vision Annotations</a></li>
<li class="toctree-l1"><a class="reference internal" href="vision-batch.html">Vision Batch</a></li>
<li class="toctree-l1"><a class="reference internal" href="vision-client.html">Vision Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="vision-color.html">Vision Image Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="vision-crop-hint.html">Vision Crop Hint</a></li>
<li class="toctree-l1"><a class="reference internal" href="vision-entity.html">Vision Entity</a></li>
<li class="toctree-l1"><a class="reference internal" href="vision-feature.html">Vision Feature</a></li>
<li class="toctree-l1"><a class="reference internal" href="vision-face.html">Vision Face</a></li>
<li class="toctree-l1"><a class="reference internal" href="vision-image.html">Vision Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="vision-safe-search.html">Vision Safe Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="vision-text.html">Vision Full Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="vision-web.html">Vision Web Annotations</a></li>
</ul>
<p class="caption"><span class="caption-text">External Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/GoogleCloudPlatform/google-cloud-python/">GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/GoogleCloudPlatform/google-cloud-python/issues">Issues</a></li>
<li class="toctree-l1"><a class="reference external" href="http://stackoverflow.com/questions/tagged/google-cloud-python">Stack Overflow</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pypi.python.org/pypi/google-cloud">PyPI</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">google-cloud</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Using the API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/logging-usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-the-api">
<h1>Using the API<a class="headerlink" href="#using-the-api" title="Permalink to this headline">#</a></h1>
<div class="section" id="authentication-and-configuration">
<h2>Authentication and Configuration<a class="headerlink" href="#authentication-and-configuration" title="Permalink to this headline">#</a></h2>
<ul>
<li><p class="first">For an overview of authentication in <code class="docutils literal"><span class="pre">google-cloud-python</span></code>,
see <a class="reference internal" href="google-cloud-auth.html"><span class="doc">Authentication</span></a>.</p>
</li>
<li><p class="first">In addition to any authentication configuration, you should also set the
<span class="target" id="index-0"></span><code class="xref std std-envvar docutils literal"><span class="pre">GOOGLE_CLOUD_PROJECT</span></code> environment variable for the project you&#8217;d like
to interact with. If you are Google App Engine or Google Compute Engine
this will be detected automatically.</p>
</li>
<li><p class="first">The library now enables the <code class="docutils literal"><span class="pre">gRPC</span></code> transport for the logging API by
default, assuming that the required dependencies are installed and
importable.  To <em>disable</em> this transport, set the
<span class="target" id="index-1"></span><code class="xref std std-envvar docutils literal"><span class="pre">GOOGLE_CLOUD_DISABLE_GRPC</span></code> environment variable to a
non-empty string, e.g.:  <code class="docutils literal"><span class="pre">$</span> <span class="pre">export</span> <span class="pre">GOOGLE_CLOUD_DISABLE_GRPC=true</span></code>.</p>
</li>
<li><p class="first">After configuring your environment, create a
<a class="reference internal" href="logging-client.html#google.cloud.logging.client.Client" title="google.cloud.logging.client.Client"><code class="xref py py-class docutils literal"><span class="pre">Client</span></code></a></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">google.cloud</span> <span class="k">import</span> <span class="n">logging</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
</pre></div>
</div>
<p>or pass in <code class="docutils literal"><span class="pre">credentials</span></code> and <code class="docutils literal"><span class="pre">project</span></code> explicitly</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">google.cloud</span> <span class="k">import</span> <span class="n">logging</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="s1">&#39;my-project&#39;</span><span class="p">,</span> <span class="n">credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="writing-log-entries">
<h2>Writing log entries<a class="headerlink" href="#writing-log-entries" title="Permalink to this headline">#</a></h2>
<p>To write log entries, first create a
<a class="reference internal" href="logging-logger.html#google.cloud.logging.logger.Logger" title="google.cloud.logging.logger.Logger"><code class="xref py py-class docutils literal"><span class="pre">Logger</span></code></a>, passing the &#8220;log name&#8221; with
which to associate the entries:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">logger</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">logger</span><span class="p">(</span><span class="n">LOG_NAME</span><span class="p">)</span>
</pre></div>
</div>
<p>Write a simple text entry to the logger.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">logger</span><span class="o">.</span><span class="n">log_text</span><span class="p">(</span><span class="s2">&quot;A simple entry&quot;</span><span class="p">)</span>  <span class="c1"># API call</span>
</pre></div>
</div>
<p>Write a dictionary entry to the logger.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">logger</span><span class="o">.</span><span class="n">log_struct</span><span class="p">({</span>
    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;My second entry&#39;</span><span class="p">,</span>
    <span class="s1">&#39;weather&#39;</span><span class="p">:</span> <span class="s1">&#39;partly cloudy&#39;</span><span class="p">,</span>
<span class="p">})</span>  <span class="c1"># API call</span>
</pre></div>
</div>
</div>
<div class="section" id="retrieving-log-entries">
<h2>Retrieving log entries<a class="headerlink" href="#retrieving-log-entries" title="Permalink to this headline">#</a></h2>
<p>Fetch entries for the default project.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">list_entries</span><span class="p">():</span>  <span class="c1"># API call(s)</span>
    <span class="n">do_something_with</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
</pre></div>
</div>
<p>Fetch entries across multiple projects.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">PROJECT_IDS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;one-project&#39;</span><span class="p">,</span> <span class="s1">&#39;another-project&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">list_entries</span><span class="p">(</span><span class="n">project_ids</span><span class="o">=</span><span class="n">PROJECT_IDS</span><span class="p">):</span>  <span class="c1"># API call(s)</span>
    <span class="n">do_something_with</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
</pre></div>
</div>
<p>Filter entries retrieved using the <a class="reference external" href="https://cloud.google.com/logging/docs/view/advanced_filters">Advanced Logs Filters</a> syntax</p>
<p>Fetch entries for the default project.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">FILTER</span> <span class="o">=</span> <span class="s1">&#39;logName:log_name AND textPayload:simple&#39;</span>
<span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">list_entries</span><span class="p">(</span><span class="n">filter_</span><span class="o">=</span><span class="n">FILTER</span><span class="p">):</span>  <span class="c1"># API call(s)</span>
    <span class="n">do_something_with</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
</pre></div>
</div>
<p>Sort entries in descending timestamp order.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">google.cloud.logging</span> <span class="k">import</span> <span class="n">DESCENDING</span>
<span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">list_entries</span><span class="p">(</span><span class="n">order_by</span><span class="o">=</span><span class="n">DESCENDING</span><span class="p">):</span>  <span class="c1"># API call(s)</span>
    <span class="n">do_something_with</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
</pre></div>
</div>
<p>Retrieve entries in batches of 10, iterating until done.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">iterator</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_entries</span><span class="p">()</span>
<span class="n">pages</span> <span class="o">=</span> <span class="n">iterator</span><span class="o">.</span><span class="n">pages</span>

<span class="n">page1</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">pages</span><span class="p">)</span>  <span class="c1"># API call</span>
<span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">page1</span><span class="p">:</span>
    <span class="n">do_something_with</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>

<span class="n">page2</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">pages</span><span class="p">)</span>  <span class="c1"># API call</span>
<span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">page2</span><span class="p">:</span>
    <span class="n">do_something_with</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
</pre></div>
</div>
<p>Retrieve entries for a single logger, sorting in descending timestamp order:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">google.cloud.logging</span> <span class="k">import</span> <span class="n">DESCENDING</span>
<span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">logger</span><span class="o">.</span><span class="n">list_entries</span><span class="p">(</span><span class="n">order_by</span><span class="o">=</span><span class="n">DESCENDING</span><span class="p">):</span>  <span class="c1"># API call(s)</span>
    <span class="n">do_something_with</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="delete-all-entries-for-a-logger">
<h2>Delete all entries for a logger<a class="headerlink" href="#delete-all-entries-for-a-logger" title="Permalink to this headline">#</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">logger</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>  <span class="c1"># API call</span>
</pre></div>
</div>
</div>
<div class="section" id="manage-log-metrics">
<h2>Manage log metrics<a class="headerlink" href="#manage-log-metrics" title="Permalink to this headline">#</a></h2>
<p>Metrics are counters of entries which match a given filter.  They can be
used within Stackdriver Monitoring to create charts and alerts.</p>
<p>List all metrics for a project:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">metric</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">list_metrics</span><span class="p">():</span>  <span class="c1"># API call(s)</span>
    <span class="n">do_something_with</span><span class="p">(</span><span class="n">metric</span><span class="p">)</span>
</pre></div>
</div>
<p>Create a metric:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">metric</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">metric</span><span class="p">(</span>
    <span class="n">METRIC_NAME</span><span class="p">,</span> <span class="n">filter_</span><span class="o">=</span><span class="n">FILTER</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">DESCRIPTION</span><span class="p">)</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="n">metric</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>  <span class="c1"># API call</span>
<span class="n">metric</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>  <span class="c1"># API call</span>
<span class="k">assert</span> <span class="n">metric</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>  <span class="c1"># API call</span>
</pre></div>
</div>
<p>Refresh local information about a metric:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">existing_metric</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">metric</span><span class="p">(</span><span class="n">METRIC_NAME</span><span class="p">)</span>
<span class="n">existing_metric</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>  <span class="c1"># API call</span>
</pre></div>
</div>
<p>Update a metric:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">existing_metric</span><span class="o">.</span><span class="n">filter_</span> <span class="o">=</span> <span class="n">UPDATED_FILTER</span>
<span class="n">existing_metric</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">UPDATED_DESCRIPTION</span>
<span class="n">existing_metric</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>  <span class="c1"># API call</span>
</pre></div>
</div>
<p>Delete a metric:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>    <span class="n">metric</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="export-log-entries-using-sinks">
<h2>Export log entries using sinks<a class="headerlink" href="#export-log-entries-using-sinks" title="Permalink to this headline">#</a></h2>
<p>Sinks allow exporting entries which match a given filter to Cloud Storage
buckets, BigQuery datasets, or Cloud Pub/Sub topics.</p>
<div class="section" id="export-to-cloud-storage">
<h3>Export to Cloud Storage<a class="headerlink" href="#export-to-cloud-storage" title="Permalink to this headline">#</a></h3>
<p>Make sure that the storage bucket you want to export logs too has
<code class="docutils literal"><span class="pre">cloud-logs&#64;google.com</span></code> as the owner. See
<a class="reference external" href="https://cloud.google.com/logging/docs/export/configure_export_v2#errors_exporting_to_cloud_storage">Setting permissions for Cloud Storage</a>.</p>
<p>Add <code class="docutils literal"><span class="pre">cloud-logs&#64;google.com</span></code> as the owner of the bucket:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">bucket</span><span class="o">.</span><span class="n">acl</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>  <span class="c1"># API call</span>
<span class="n">logs_group</span> <span class="o">=</span> <span class="n">bucket</span><span class="o">.</span><span class="n">acl</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;cloud-logs@google.com&#39;</span><span class="p">)</span>
<span class="n">logs_group</span><span class="o">.</span><span class="n">grant_owner</span><span class="p">()</span>
<span class="n">bucket</span><span class="o">.</span><span class="n">acl</span><span class="o">.</span><span class="n">add_entity</span><span class="p">(</span><span class="n">logs_group</span><span class="p">)</span>
<span class="n">bucket</span><span class="o">.</span><span class="n">acl</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># API call</span>
</pre></div>
</div>
<p>Create a Cloud Storage sink:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">DESTINATION</span> <span class="o">=</span> <span class="s1">&#39;storage.googleapis.com/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bucket</span><span class="o">.</span><span class="n">name</span><span class="p">,)</span>
<span class="n">sink</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">sink</span><span class="p">(</span><span class="n">SINK_NAME</span><span class="p">,</span> <span class="n">filter_</span><span class="o">=</span><span class="n">FILTER</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="n">DESTINATION</span><span class="p">)</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="n">sink</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>  <span class="c1"># API call</span>
<span class="n">sink</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>  <span class="c1"># API call</span>
<span class="k">assert</span> <span class="n">sink</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>  <span class="c1"># API call</span>
</pre></div>
</div>
</div>
<div class="section" id="export-to-bigquery">
<h3>Export to BigQuery<a class="headerlink" href="#export-to-bigquery" title="Permalink to this headline">#</a></h3>
<p>To export logs to BigQuery you must log into the Cloud Platform Console
and add <code class="docutils literal"><span class="pre">cloud-logs&#64;google.com</span></code> to a dataset.</p>
<p>See: <a class="reference external" href="https://cloud.google.com/logging/docs/export/configure_export_v2#errors_exporting_to_bigquery">Setting permissions for BigQuery</a></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">google.cloud.bigquery.dataset</span> <span class="k">import</span> <span class="n">AccessGrant</span>
<span class="n">grants</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">access_grants</span>
<span class="n">grants</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">AccessGrant</span><span class="p">(</span>
    <span class="s1">&#39;WRITER&#39;</span><span class="p">,</span> <span class="s1">&#39;groupByEmail&#39;</span><span class="p">,</span> <span class="s1">&#39;cloud-logs@google.com&#39;</span><span class="p">))</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">access_grants</span> <span class="o">=</span> <span class="n">grants</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>  <span class="c1"># API call</span>
</pre></div>
</div>
<p>Create a BigQuery sink:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">DESTINATION</span> <span class="o">=</span> <span class="s1">&#39;bigquery.googleapis.com</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">path</span><span class="p">,)</span>
<span class="n">sink</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">sink</span><span class="p">(</span><span class="n">SINK_NAME</span><span class="p">,</span> <span class="n">filter_</span><span class="o">=</span><span class="n">FILTER</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="n">DESTINATION</span><span class="p">)</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="n">sink</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>  <span class="c1"># API call</span>
<span class="n">sink</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>  <span class="c1"># API call</span>
<span class="k">assert</span> <span class="n">sink</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>  <span class="c1"># API call</span>
</pre></div>
</div>
</div>
<div class="section" id="export-to-pub-sub">
<h3>Export to Pub/Sub<a class="headerlink" href="#export-to-pub-sub" title="Permalink to this headline">#</a></h3>
<p>To export logs to BigQuery you must log into the Cloud Platform Console
and add <code class="docutils literal"><span class="pre">cloud-logs&#64;google.com</span></code> to a topic.</p>
<p>See: <a class="reference external" href="https://cloud.google.com/logging/docs/export/configure_export_v2#errors_exporting_logs_to_cloud_pubsub">Setting permissions for Pub/Sub</a></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">policy</span> <span class="o">=</span> <span class="n">topic</span><span class="o">.</span><span class="n">get_iam_policy</span><span class="p">()</span>  <span class="c1"># API call</span>
<span class="n">policy</span><span class="o">.</span><span class="n">owners</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">policy</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;cloud-logs@google.com&#39;</span><span class="p">))</span>
<span class="n">topic</span><span class="o">.</span><span class="n">set_iam_policy</span><span class="p">(</span><span class="n">policy</span><span class="p">)</span>  <span class="c1"># API call</span>
</pre></div>
</div>
<p>Create a Cloud Pub/Sub sink:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">DESTINATION</span> <span class="o">=</span> <span class="s1">&#39;pubsub.googleapis.com/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">topic</span><span class="o">.</span><span class="n">full_name</span><span class="p">,)</span>
<span class="n">sink</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">sink</span><span class="p">(</span><span class="n">SINK_NAME</span><span class="p">,</span> <span class="n">filter_</span><span class="o">=</span><span class="n">FILTER</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="n">DESTINATION</span><span class="p">)</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="n">sink</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>  <span class="c1"># API call</span>
<span class="n">sink</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>  <span class="c1"># API call</span>
<span class="k">assert</span> <span class="n">sink</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>  <span class="c1"># API call</span>
</pre></div>
</div>
</div>
<div class="section" id="manage-sinks">
<h3>Manage Sinks<a class="headerlink" href="#manage-sinks" title="Permalink to this headline">#</a></h3>
<p>List all sinks for a project:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">sink</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">list_sinks</span><span class="p">():</span>  <span class="c1"># API call(s)</span>
    <span class="n">do_something_with</span><span class="p">(</span><span class="n">sink</span><span class="p">)</span>
</pre></div>
</div>
<p>Refresh local information about a sink:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">existing_sink</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">sink</span><span class="p">(</span><span class="n">SINK_NAME</span><span class="p">)</span>
<span class="n">existing_sink</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
</pre></div>
</div>
<p>Update a sink:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">existing_sink</span><span class="o">.</span><span class="n">filter_</span> <span class="o">=</span> <span class="n">UPDATED_FILTER</span>
<span class="n">existing_sink</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</pre></div>
</div>
<p>Delete a sink:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sink</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="integration-with-python-logging-module">
<h2>Integration with Python logging module<a class="headerlink" href="#integration-with-python-logging-module" title="Permalink to this headline">#</a></h2>
<p>It&#8217;s possible to tie the Python <a class="reference external" href="https://docs.python.org/2/library/logging.html#module-logging" title="(in Python v2.7)"><code class="xref py py-mod docutils literal"><span class="pre">logging</span></code></a> module directly into Google
Stackdriver Logging. There are different handler options to accomplish this.
To automatically pick the default for your current environment, use
<a class="reference internal" href="logging-client.html#google.cloud.logging.client.Client.get_default_handler" title="google.cloud.logging.client.Client.get_default_handler"><code class="xref py py-meth docutils literal"><span class="pre">get_default_handler()</span></code></a>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_default_handler</span><span class="p">()</span>
<span class="n">cloud_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;cloudLogger&#39;</span><span class="p">)</span>
<span class="n">cloud_logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
<span class="n">cloud_logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
<span class="n">cloud_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;bad news&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>It is also possible to attach the handler to the root Python logger, so that
for example a plain <code class="docutils literal"><span class="pre">logging.warn</span></code> call would be sent to Stackdriver Logging,
as well as any other loggers created. A helper method
<a class="reference internal" href="logging-client.html#google.cloud.logging.client.Client.setup_logging" title="google.cloud.logging.client.Client.setup_logging"><code class="xref py py-meth docutils literal"><span class="pre">setup_logging()</span></code></a> is provided
to configure this automatically.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">setup_logging</span><span class="p">(</span><span class="n">log_level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To reduce cost and quota usage, do not enable Stackdriver logging
handlers while testing locally.</p>
</div>
<p>You can also exclude certain loggers:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">setup_logging</span><span class="p">(</span><span class="n">log_level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span>
                     <span class="n">excluded_loggers</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;werkzeug&#39;</span><span class="p">,))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="cloud-logging-handler">
<h1>Cloud Logging Handler<a class="headerlink" href="#cloud-logging-handler" title="Permalink to this headline">#</a></h1>
<p>If you prefer not to use
<a class="reference internal" href="logging-client.html#google.cloud.logging.client.Client.get_default_handler" title="google.cloud.logging.client.Client.get_default_handler"><code class="xref py py-meth docutils literal"><span class="pre">get_default_handler()</span></code></a>, you can
directly create a
<a class="reference internal" href="logging-handlers.html#google.cloud.logging.handlers.handlers.CloudLoggingHandler" title="google.cloud.logging.handlers.handlers.CloudLoggingHandler"><code class="xref py py-class docutils literal"><span class="pre">CloudLoggingHandler</span></code></a> instance
which will write directly to the API.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">google.cloud.logging.handlers</span> <span class="k">import</span> <span class="n">CloudLoggingHandler</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">CloudLoggingHandler</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
<span class="n">cloud_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;cloudLogger&#39;</span><span class="p">)</span>
<span class="n">cloud_logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
<span class="n">cloud_logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
<span class="n">cloud_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;bad news&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This handler by default uses an asynchronous transport that sends log
entries on a background thread. However, the API call will still be made
in the same process. For other transport options, see the transports
section.</p>
</div>
<p>All logs will go to a single custom log, which defaults to &#8220;python&#8221;. The name
of the Python logger will be included in the structured log entry under the
&#8220;python_logger&#8221; field. You can change it by providing a name to the handler:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">handler</span> <span class="o">=</span> <span class="n">CloudLoggingHandler</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;mycustomlog&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="fluentd-logging-handlers">
<h1>fluentd logging handlers<a class="headerlink" href="#fluentd-logging-handlers" title="Permalink to this headline">#</a></h1>
<p>Besides <a class="reference internal" href="logging-handlers.html#google.cloud.logging.handlers.handlers.CloudLoggingHandler" title="google.cloud.logging.handlers.handlers.CloudLoggingHandler"><code class="xref py py-class docutils literal"><span class="pre">CloudLoggingHandler</span></code></a>,
which writes directly to the API, two other handlers are provided.
<a class="reference internal" href="logging-handlers-app-engine.html#google.cloud.logging.handlers.app_engine.AppEngineHandler" title="google.cloud.logging.handlers.app_engine.AppEngineHandler"><code class="xref py py-class docutils literal"><span class="pre">AppEngineHandler</span></code></a>, which is
recommended when running on the Google App Engine Flexible vanilla runtimes
(i.e. your app.yaml contains <code class="docutils literal"><span class="pre">runtime:</span> <span class="pre">python</span></code>), and
<a class="reference internal" href="logging-handlers-container-engine.html#google.cloud.logging.handlers.container_engine.ContainerEngineHandler" title="google.cloud.logging.handlers.container_engine.ContainerEngineHandler"><code class="xref py py-class docutils literal"><span class="pre">ContainerEngineHandler</span></code></a>
, which is recommended when running on <a class="reference external" href="https://cloud.google.com/container-engine/">Google Container Engine</a> with the
Stackdriver Logging plugin enabled.</p>
<p><a class="reference internal" href="logging-client.html#google.cloud.logging.client.Client.get_default_handler" title="google.cloud.logging.client.Client.get_default_handler"><code class="xref py py-meth docutils literal"><span class="pre">get_default_handler()</span></code></a> and
<a class="reference internal" href="logging-client.html#google.cloud.logging.client.Client.setup_logging" title="google.cloud.logging.client.Client.setup_logging"><code class="xref py py-meth docutils literal"><span class="pre">setup_logging()</span></code></a> will attempt to use
the environment to automatically detect whether the code is running in
these platforms and use the appropriate handler.</p>
<p>In both cases, the fluentd agent is configured to automatically parse log files
in an expected format and forward them to Stackdriver logging. The handlers
provided help set the correct metadata such as log level so that logs can be
filtered accordingly.</p>
</div>
<div class="section" id="cloud-logging-handler-transports">
<h1>Cloud Logging Handler transports<a class="headerlink" href="#cloud-logging-handler-transports" title="Permalink to this headline">#</a></h1>
<p>The <a class="reference internal" href="logging-handlers.html#google.cloud.logging.handlers.handlers.CloudLoggingHandler" title="google.cloud.logging.handlers.handlers.CloudLoggingHandler"><code class="xref py py-class docutils literal"><span class="pre">CloudLoggingHandler</span></code></a>
logging handler can use different transports. The default is
<code class="xref py py-class docutils literal"><span class="pre">BackgroundThreadTransport</span></code>.</p>
<blockquote>
<div><ol class="arabic simple">
<li><code class="xref py py-class docutils literal"><span class="pre">BackgroundThreadTransport</span></code> this is
the default. It writes entries on a background
<code class="xref py py-class docutils literal"><span class="pre">python.threading.Thread</span></code>.</li>
</ol>
<ol class="arabic simple">
<li><code class="xref py py-class docutils literal"><span class="pre">SyncTransport</span></code> this handler does a
direct API call on each logging statement to write the entry.</li>
</ol>
</div></blockquote>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="logging-client.html" class="btn btn-neutral float-right" title="Stackdriver Logging Client" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="error-reporting-util.html" class="btn btn-neutral" title="Error Reporting Utilities" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Google.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'5113bff',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>